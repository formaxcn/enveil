# Spec 创建指导原则

## 语言要求
- **主要语言**: 使用中文进行交流和文档编写
- **技术术语**: 保持英文（如 TypeScript、WXT、Chrome API 等）
- **代码示例**: 注释使用英文，代码本身保持英文

## Spec 文件结构
在 `.kiro/specs/[功能名称]/` 目录下创建以下标准文件：

### requirements.md（需求文档）
- **用户故事**: 使用中文描述用户需求
- **功能需求**: 详细的功能描述和验收标准
- **非功能需求**: 性能、安全、兼容性要求
- **技术约束**: 基于项目技术栈的限制

### design.md（设计文档）
- **架构设计**: 组件结构和交互关系
- **数据模型**: TypeScript 接口定义
- **UI/UX 设计**: 界面布局和交互流程
- **技术实现**: 具体的实现方案

### task-list.md（任务列表）
- **开发任务**: 具体的编码任务分解
- **优先级排序**: 高、中、低优先级分类
- **时间估算**: 合理的工作量评估
- **依赖关系**: 任务间的依赖关系

## 质量标准

### 测试策略
- **不需要复杂测试用例**: 避免编写详细的单元测试或集成测试用例
- **静态检查优先**: 依赖 bun + TypeScript 进行静态类型检查
- **手动测试**: 重点关注功能验证和用户体验测试
- **性能检查**: 使用 Chrome DevTools 进行性能监控

### 代码质量
- **TypeScript 严格模式**: 确保类型安全
- **ESLint 规则**: 遵循代码规范
- **错误处理**: 包含适当的错误处理机制
- **代码注释**: 为复杂逻辑添加中文注释

## 技术约束遵循

### 必须遵循的技术栈
- **构建工具**: WXT 框架
- **包管理器**: bun（优先于 npm/yarn）
- **开发语言**: TypeScript（严格模式）
- **UI 框架**: Vanilla JavaScript（避免重型框架）

### 浏览器扩展规范
- **Manifest V3**: 符合最新扩展规范
- **权限最小化**: 只请求必要的浏览器权限
- **性能优化**: 最小化内存和 CPU 使用
- **兼容性**: 主要支持 Chrome，可选支持 Firefox

## 文档编写规范

### 中文表达
- **简洁明了**: 避免冗长的描述
- **技术准确**: 确保技术术语使用正确
- **用户友好**: 从用户角度描述功能和需求
- **实用导向**: 专注于可执行的任务和方案

### 格式规范
- **标题层级**: 使用清晰的标题结构
- **代码块**: 使用适当的语法高亮
- **列表格式**: 使用有序或无序列表组织信息
- **表格使用**: 适当使用表格展示结构化信息

## 开发流程集成

### Spec 创建流程
1. **需求分析**: 先创建 requirements.md
2. **设计方案**: 基于需求创建 design.md
3. **任务分解**: 最后创建 task-list.md
4. **迭代优化**: 根据开发过程调整文档

### 与代码开发的关系
- **指导开发**: Spec 文档指导具体的代码实现
- **版本同步**: 文档与代码版本保持同步
- **变更管理**: 需求变更时及时更新文档
- **知识传承**: 文档作为项目知识库的一部分

## 示例结构

```
.kiro/specs/
├── shadow-dom-enhancement/
│   ├── requirements.md      # 中文需求文档
│   ├── design.md           # 中文设计文档
│   └── task-list.md        # 中文任务列表
└── advanced-matching/
    ├── requirements.md
    ├── design.md
    └── task-list.md
```

## 避免的内容

### 不要包含的内容
- **复杂的测试用例**: 不编写详细的测试脚本
- **过度的技术细节**: 避免过于底层的实现细节
- **冗余的文档**: 不重复已有的技术文档
- **理论性内容**: 专注于实际的开发需求

### 简化的测试方法
- **类型检查**: `bun run compile` 验证 TypeScript 类型
- **构建验证**: `bun run build` 确保构建成功
- **功能测试**: 手动测试核心功能
- **性能监控**: 使用浏览器开发者工具检查性能

这些指导原则确保创建的 spec 文档既实用又符合项目的技术特点和开发流程。